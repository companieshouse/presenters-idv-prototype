{% extends "layouts/main.html" %}

{% block beforeContent %}
   {% include "/includes/phase-banner.html" %}
   {% include "/includes/back-link-language-toggle.html" %}
  {% include "/includes/user-bar.html" %}
{% endblock %}

{% block content %}
  {% from "govuk/components/radios/macro.njk" import govukRadios %}
  {% from "govuk/components/button/macro.njk" import govukButton %}

  <form id="presenter-type-form">

<input type="hidden" id="backEndVerification" value="{{ data['backEndVerification'] }}">





    {{ govukRadios({
      name: "what-type-of-presenter",
      fieldset: {
        legend: {
          text: "What type of presenter are you?",
          isPageHeading: true,
          classes: "govuk-fieldset__legend--l"
        }
      },
      items: [
        { value: "acsp", text: "ACSP or employee of ACSP" },
        { value: "director", text: "Director of a company" },
        { value: "employee", text: "Employee of a corp director" },
        { value: "none", text: "None of the above" }
      ]
    }) }}

    {{ govukButton({
      text: "Save and continue",
      type: "submit"
    }) }}
  </form>

<script>
  document.getElementById('presenter-type-form').addEventListener('submit', function(e) {
    e.preventDefault();

    const selected = document.querySelector('input[name="what-type-of-presenter"]:checked');
    const backEndVerification = document.getElementById('backEndVerification').value;

    if (!selected) {
      alert('Please select a valid presenter type.');
      return;
    }

    const value = selected.value;

    if (value === 'acsp') {
      window.location.href = 'confirm-acsp-statements.html';
    } else if (value === 'none') {
      window.location.href = 'error-page.html';
    } else if (value === 'director' || value === 'employee') {
      if (backEndVerification === 'backendVerified') {
        window.location.href = 'confirm-director-statements.html';
      } else if (backEndVerification === 'backendNotVerified') {
        window.location.href = 'identity-verified-CH.html';
      } else {
        alert('Unknown verification status.');
      }
    } else {
      alert('Please select a valid presenter type.');
    }
  });
</script>

{% endblock %}